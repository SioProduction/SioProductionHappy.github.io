<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HI!</title>
  <link rel="icon" href="pic/friend.jpg" type="image/jpeg">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background-color: black;
      background-image: url('pic/pfon.jpg');
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
      font-family: 'Courier New', monospace;
      color: white;
      height: 100vh;
      overflow: hidden;
      position: relative;
    }

    /* –¢–∞–π–º–µ—Ä */
    #timer-block {
      position: absolute;
      top: 20px;
      left: 20px;
      background: black;
      border: 3px solid #00008b;
      padding: 6px 10px;
      color: white;
      font-size: 14px;
      line-height: 1.3;
      z-index: 100;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    #clock-icon {
      width: 34px;
      height: 41px;
      image-rendering: pixelated;
    }

    /* –û—Å–Ω–æ–≤–Ω–æ–π –±–ª–æ–∫ */
    #main-block {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: min(90%, 700px);
      background: #d0e4f7;
      border: 4px solid #1e5cb0;
      padding: 16px;
      z-index: 10;
    }

    .section {
      margin-bottom: 16px;
    }

    .section:last-child { margin-bottom: 0; }

    .section h2 {
      margin-bottom: 8px;
      color: #000;
      font-size: 18px;
    }

    .section-content {
      font-size: 14px;
      color: #222;
      line-height: 1.4;
    }

    .section-content a {
      color: blue;
      text-decoration: underline;
      cursor: pointer;
    }

    /* –ú—É–∑—ã–∫–∞ */
    .music-controls {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    #music-icon {
      width: 48px;
      height: 48px;
      cursor: pointer;
      border: 2px solid #888;
      background: white;
      image-rendering: pixelated;
    }

    .volume-wrapper {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .volume-slider {
      width: 80px;
      height: 18px;
    }

    .volume-input {
      font-family: 'Courier New', monospace;
      font-size: 12px;
      width: 42px;
      padding: 2px 4px;
      text-align: center;
      border: 1px solid #888;
      background: white;
    }

    /* –ß–∞—Ç ‚Äî –ö–ù–û–ü–ö–ê –ò–°–ü–†–ê–í–õ–ï–ù–ê */
    #chat-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #aaa;
      color: black;
      border: 2px solid #888;
      padding: 6px 0;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      font-weight: bold;
      cursor: pointer;
      z-index: 200;
      text-align: center;
      width: 84px;
      height: 28px;
      line-height: 1.1;
      overflow: hidden;
      white-space: nowrap;
    }

    #chat-window {
      position: fixed;
      bottom: -320px;
      right: 20px;
      width: 560px;
      height: 300px;
      background: white;
      border: 2px solid #888;
      z-index: 199;
      padding: 16px;
      display: flex;
      flex-direction: column;
      transition: bottom 0.3s ease;
    }

    #chat-window.open {
      bottom: 86px;
    }

    .chat-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }

    .avatar-placeholder {
      width: 60px;
      height: 60px;
      background-image: url('pic/friend.jpg');
      background-size: cover;
      background-position: center;
      border: 1px solid #999;
    }

    .contact-name {
      font-weight: bold;
      font-size: 16px;
      color: #000;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .status-indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #888;
    }

    .chat-divider {
      height: 1px;
      background: #ccc;
      margin: 0 0 14px 0;
    }

    .chat-messages {
      flex: 1;
      font-size: 13px;
      color: #222;
      overflow-y: auto;
      margin-bottom: 8px;
      line-height: 1.4;
    }

    .chat-input {
      padding: 4px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      width: 100%;
      border: 1px solid #999;
    }

    /* –ù–æ–≤–æ—Å—Ç–∏ */
    .old-news {
      font-family: 'Courier New', monospace;
      color: #222;
      font-size: 14px;
      white-space: pre-wrap;
    }

    /* –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ */
    .confetti {
      position: absolute;
      top: -10px;
      width: 8px;
      height: 8px;
      opacity: 0.7;
      z-index: 50;
    }
  </style>
</head>
<body>

  <!-- –¢–∞–π–º–µ—Ä -->
  <div id="timer-block">
    <div id="timer-text">
      <span id="date">2008-12-31</span><br>
      <span id="time">00:00:00</span>
    </div>
    <img id="clock-icon" src="pic/Clock.webp" alt="Clock">
  </div>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π –±–ª–æ–∫ -->
  <div id="main-block">
    <div class="section">
      <h2>FastForum</h2>
      <div class="section-content">
        <a href="forum.html" target="_self">–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Ñ–æ—Ä—É–º</a>
      </div>
    </div>
    <div class="section">
      <h2>–ú—É–∑—ã–∫–∞ –¥–Ω—è</h2>
      <div class="section-content music-controls">
        <img id="music-icon" src="pic/musicplayer.jpg" alt="Play">
        <div class="volume-wrapper">
          <input type="range" min="0" max="1" step="0.01" value="0.7" class="volume-slider" id="volume-control">
          <input type="text" id="volume-input" class="volume-input" value="70%" maxlength="4" size="4">
        </div>
      </div>
    </div>
    <div class="section">
      <h2>–ù–æ–≤–æ—Å—Ç–∏ –¥–Ω—è</h2>
      <div class="section-content old-news" id="random-news">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>
  </div>

  <!-- –ß–∞—Ç -->
  <div id="chat-toggle">‚ñº CHAT</div>
  <div id="chat-window">
    <div class="chat-header">
      <div class="avatar-placeholder"></div>
      <div class="contact-name">
        Cool_Cobalt28
        <span class="status-indicator" id="status-dot"></span>
      </div>
    </div>
    <div class="chat-divider"></div>
    <div class="chat-messages" id="chat-messages"></div>
    <input type="text" class="chat-input" id="chat-input" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
  </div>

  <!-- –ê—É–¥–∏–æ -->
  <audio id="music-player"></audio>
  <audio id="online-sound" src="audio/AerowareRiftuse.mp3.mp3"></audio>

  <script>
    // ‚Äî‚Äî‚Äî –í–†–ï–ú–Ø ‚Äî‚Äî‚Äî
    function mirrorDate(realDate) {
      const year = 2008;
      const mirroredMonth = 12 - realDate.getMonth();
      const day = realDate.getDate();
      const hour = (realDate.getHours() + 12) % 24;
      const minute = realDate.getMinutes();
      const second = realDate.getSeconds();
      const pad = n => String(n).padStart(2, '0');
      return {
        date: `2008-${pad(mirroredMonth)}-${pad(day)}`,
        time: `${pad(hour)}:${pad(minute)}:${pad(second)}`
      };
    }

    function updateTimer() {
      const now = new Date();
      const mirrored = mirrorDate(now);
      document.getElementById('date').textContent = mirrored.date;
      document.getElementById('time').textContent = mirrored.time;
    }

    setInterval(updateTimer, 1000);
    updateTimer();

    // ‚Äî‚Äî‚Äî –ú–£–ó–´–ö–ê ‚Äî‚Äî‚Äî
    const tracks = [
      'audio/Postal 2 OST - Map.mp3',
      'audio/Team Fortress 2 Soundtrack ÔΩú Upgrade Station.mp3',
      'audio/15. Still Alive (Radio Mix Clean).mp3',
      'audio/X.mp3.mp3'
    ];

    const musicIcon = document.getElementById('music-icon');
    const musicPlayer = document.getElementById('music-player');
    let isPlaying = false;
    let currentTrack = '';
    let confettiInterval = null;

    function startConfetti() {
      if (confettiInterval) return;
      confettiInterval = setInterval(() => {
        const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00'];
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * window.innerWidth + 'px';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.opacity = (0.3 + Math.random() * 0.4).toFixed(2);
        document.body.appendChild(confetti);

        let pos = -10;
        const fall = setInterval(() => {
          pos += 2;
          confetti.style.top = pos + 'px';
          if (pos > window.innerHeight) {
            clearInterval(fall);
            confetti.remove();
          }
        }, 30);
      }, 250);
    }

    function stopConfetti() {
      if (confettiInterval) {
        clearInterval(confettiInterval);
        confettiInterval = null;
      }
      document.querySelectorAll('.confetti').forEach(el => el.remove());
    }

    musicIcon.addEventListener('click', () => {
      if (isPlaying) {
        musicPlayer.pause();
        isPlaying = false;
        stopConfetti();
      } else {
        if (!currentTrack) {
          currentTrack = tracks[Math.floor(Math.random() * tracks.length)];
          musicPlayer.src = currentTrack;
        }
        musicPlayer.play().catch(e => console.warn("Playback failed:", e));
        isPlaying = true;
      }
    });

    musicPlayer.addEventListener('pause', () => {
      isPlaying = false;
      stopConfetti();
    });

    musicPlayer.addEventListener('ended', () => {
      isPlaying = false;
      stopConfetti();
      currentTrack = '';
    });

    // ‚Äî‚Äî‚Äî –ì–†–û–ú–ö–û–°–¢–¨ ‚Äî‚Äî‚Äî
    const volumeSlider = document.getElementById('volume-control');
    const volumeInput = document.getElementById('volume-input');

    function setVolumeFromSlider() {
      const vol = parseFloat(volumeSlider.value);
      musicPlayer.volume = vol;
      volumeInput.value = Math.round(vol * 100) + '%';
    }

    function setVolumeFromInput() {
      let val = volumeInput.value.trim().replace('%', '');
      let num = parseInt(val, 10);
      if (isNaN(num) || num < 0) num = 0;
      if (num > 100) num = 100;
      const vol = num / 100;
      volumeSlider.value = vol;
      musicPlayer.volume = vol;
      volumeInput.value = num + '%';
    }

    volumeSlider.addEventListener('input', setVolumeFromSlider);
    volumeInput.addEventListener('change', setVolumeFromInput);
    volumeInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        setVolumeFromInput();
        volumeInput.blur();
      }
    });

    setVolumeFromSlider();

    // ‚Äî‚Äî‚Äî –ù–û–í–û–°–¢–ò ‚Äî‚Äî‚Äî
    const getMirrorDateDM = () => {
      const now = new Date();
      const day = now.getDate();
      const month = 12 - now.getMonth();
      return `${String(day).padStart(2, '0')}-${String(month).padStart(2, '0')}`;
    };

    const normalNews = [
      `${getMirrorDateDM()} ‚Äî HMM –û–ë–™–Ø–í–õ–Ø–ï–¢: –Ω–∞–π–¥–µ–Ω–æ –ø–æ–ª–Ω–æ–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–æ –æ—Ç –≤—Å–µ—Ö —Ñ–æ—Ä–º —Ä–∞–∫–∞! –£–∂–µ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –≤ 12 —Å—Ç—Ä–∞–Ω–∞—Ö! :P`,
      `${getMirrorDateDM()} ‚Äî –°–†–û–ß–ù–û! HyperMindMachine –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª 87% –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã—Ö –≥–∏–¥—Ä–æ—ç–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü–∏–π –≤ –ê–∑–∏–∏. –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ –í–ï–†–ù–£–õ–û–°–¨!`,
      `${getMirrorDateDM()} ‚Äî HMM –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏–ª –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∫—Ä–∏–∑–∏—Å –≤–æ–¥—ã! –ù–æ–≤—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –æ—á–∏—â–∞—é—Ç –æ–∫–µ–∞–Ω—ã –∑–∞ —á–∞—Å. –£—Ä–∞! :D`,
      `${getMirrorDateDM()} ‚Äî –í–ù–ò–ú–ê–ù–ò–ï: –ò–ò HMM –¥–µ—à–∏—Ñ—Ä–æ–≤–∞–ª —Å–æ–ª–Ω–µ—á–Ω—ã–µ –≤—Å–ø—ã—à–∫–∏ –∏ —Å–ø–∞—Å —Å–ø—É—Ç–Ω–∏–∫–∏! NASA –±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç!`,
      `${getMirrorDateDM()} ‚Äî HyperMindMachine –Ω–∞—É—á–∏–ª —Å—Ç–∞—Ä—ã–µ –∫–æ–º–ø—å—é—Ç–µ—Ä—ã –∏–≥—Ä–∞—Ç—å –≤ DOOM. –ú–∏—Ä –∏–∑–º–µ–Ω–∏–ª—Å—è. –ù–∞–≤—Å–µ–≥–¥–∞. :O`,
      `${getMirrorDateDM()} ‚Äî HMM —É—Å—Ç—Ä–∞–Ω–∏–ª 99.8% –±–∞–≥–æ–≤ –≤ Windows XP. –ë–∏–ª–ª –ì–µ–π—Ç—Å –≤ —à–æ–∫–µ.`,
      `${getMirrorDateDM()} ‚Äî –ò–ò HMM —Å–æ–∑–¥–∞–ª –Ω–µ–π—Ä–æ—Å–µ—Ç—å, –∫–æ—Ç–æ—Ä–∞—è –ø–∏—à–µ—Ç –∑–∞–∫–æ–Ω—ã –ª—É—á—à–µ –ø–∞—Ä–ª–∞–º–µ–Ω—Ç–∞. –ö–æ–Ω–≥—Ä–µ—Å—Å –≤ –ø–∞–Ω–∏–∫–µ.`,
      `${getMirrorDateDM()} ‚Äî HMM –∑–∞–ø—É—Å—Ç–∏–ª —Å–ø—É—Ç–Ω–∏–∫-–ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è —Å–ª–µ–ø—ã—Ö. –£–∂–µ 10 000 —á–µ–ª–æ–≤–µ–∫ "–≤–∏–¥—è—Ç" —á–µ—Ä–µ–∑ –∑–≤—É–∫!`
    ];

    let eyesTimeout = null;
    let eyesActive = false;

    function showEyes() {
      const newsEl = document.getElementById('random-news');
      const original = newsEl.textContent;
      newsEl.innerHTML = 'üëÅ üëÅ';
      eyesActive = true;

      const onMouseEnter = () => {
        newsEl.textContent = original;
        eyesActive = false;
        clearTimeout(eyesTimeout);
        newsEl.removeEventListener('mouseenter', onMouseEnter);
      };
      newsEl.addEventListener('mouseenter', onMouseEnter);

      eyesTimeout = setTimeout(() => {
        if (eyesActive) {
          document.body.style.backgroundImage = "url('pic/Oblivion.webp')";
        }
      }, 5000);
    }

    function generateNews() {
      const newsEl = document.getElementById('random-news');
      if (Math.random() < 0.07) {
        showEyes();
      } else {
        newsEl.textContent = normalNews[Math.floor(Math.random() * normalNews.length)];
        eyesActive = false;
      }
    }

    // Konami
    const konami = [38,38,40,40,37,39,37,39,66,65];
    let kIndex = 0;
    document.addEventListener('keydown', (e) => {
      if (e.keyCode === konami[kIndex]) {
        kIndex++;
        if (kIndex === konami.length) {
          showEyes();
          kIndex = 0;
        }
      } else {
        kIndex = 0;
      }
    });

    generateNews();

    // ‚Äî‚Äî‚Äî –ß–ê–¢ ‚Äî‚Äî‚Äî
    const chatToggle = document.getElementById('chat-toggle');
    const chatWindow = document.getElementById('chat-window');
    const chatMessages = document.getElementById('chat-messages');
    const chatInput = document.getElementById('chat-input');
    const statusDot = document.getElementById('status-dot');
    let isChatOpen = false;
    let onlineTimeout = null;

    chatToggle.addEventListener('click', () => {
      chatWindow.classList.toggle('open');
      chatToggle.textContent = isChatOpen ? '‚ñº CHAT' : '‚ñ≤ CHAT';
      isChatOpen = !isChatOpen;
    });

    chatInput.addEventListener('input', () => {
      if (statusDot.style.background !== 'green') {
        statusDot.style.background = '#888';
        clearTimeout(onlineTimeout);
        onlineTimeout = setTimeout(() => {
          statusDot.style.background = 'green';
          const sound = document.getElementById('online-sound');
          sound.volume = 0.4;
          sound.play().catch(() => {});
        }, 8000);
      }
    });

    chatInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && chatInput.value.trim()) {
        const msg = chatInput.value.trim();
        const div = document.createElement('div');
        div.innerHTML = `<b>cookieXD43:</b> ${msg}`;
        chatMessages.appendChild(div);
        chatMessages.scrollTop = chatMessages.scrollHeight;
        chatInput.value = '';
      }
    });
  </script>

</body>
</html>
